<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.1.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="14 Working with Source CodeSource code here refers to any plain text collection of computer instructions, possibly with comments, written using a human-readable programming language. Org can manage so">
<meta name="keywords" content="org-mode">
<meta property="og:type" content="article">
<meta property="og:title" content="work with source code">
<meta property="og:url" content="https://alphaalgorithms.github.io/2019/06/13/work-with-source-code/index.html">
<meta property="og:site_name" content="DummyHead">
<meta property="og:description" content="14 Working with Source CodeSource code here refers to any plain text collection of computer instructions, possibly with comments, written using a human-readable programming language. Org can manage so">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-06-13T07:31:56.620Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="work with source code">
<meta name="twitter:description" content="14 Working with Source CodeSource code here refers to any plain text collection of computer instructions, possibly with comments, written using a human-readable programming language. Org can manage so">





  
  
  <link rel="canonical" href="https://alphaalgorithms.github.io/2019/06/13/work-with-source-code/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>work with source code | DummyHead</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">DummyHead</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags<span class="badge">29</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories<span class="badge">16</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives<span class="badge">30</span></a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://alphaalgorithms.github.io/2019/06/13/work-with-source-code/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Gabriel">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DummyHead">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">work with source code

              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-06-13 15:31:00 / Modified: 15:31:56" itemprop="dateCreated datePublished" datetime="2019-06-13T15:31:00+08:00">2019-06-13</time>
            

            
              

              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2019/06/13/work-with-source-code/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/06/13/work-with-source-code/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="14-Working-with-Source-Code"><a href="#14-Working-with-Source-Code" class="headerlink" title="14 Working with Source Code"></a>14 Working with Source Code</h2><p>Source code here refers to any plain text collection of computer instructions, possibly with comments, written using a human-readable programming language. Org can manage source code in an Org document when the source code is identified with begin and end markers. Working with source code begins with identifying source code blocks. A source code block can be placed almost anywhere in an Org document; it is not restricted to the preamble or the end of the document. However, Org cannot manage a source code block if it is placed inside an Org comment or within a fixed width section.</p>
<p>Here is an example source code block in the Emacs Lisp language:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#+BEGIN_SRC emacs-lisp</span><br><span class="line">  (defun org-xor (a b)</span><br><span class="line">     &quot;Exclusive or.&quot;</span><br><span class="line">     (if a (not b) b))</span><br><span class="line">#+END_SRC</span><br></pre></td></tr></table></figure>
<p>Org can manage the source code in the block delimited by ‘#+BEGIN_SRC’ … ‘#+END_SRC’ in several ways that can simplify housekeeping tasks essential to modern source code maintenance. Org can edit, format, extract, export, and publish source code blocks. Org can also compile and execute a source code block, then capture the results. The Org mode literature sometimes refers to source code blocks as <em>live code</em> blocks because they can alter the content of the Org document or the material that it exports. Users can control how live they want each source code block by tweaking the header arguments (see <a href="https://orgmode.org/org.html#Using-Header-Arguments" target="_blank" rel="noopener">Using Header Arguments</a>) for compiling, execution, extraction, and exporting.</p>
<p>Source code blocks are one of many Org block types, which also include “center”, “comment”, “dynamic”, “example”, “export”, “quote”, “special”, and “verse”. This section pertains to blocks between ‘#+BEGIN_SRC’ and ‘#+END_SRC’.</p>
<p>For editing and formatting a source code block, Org uses an appropriate Emacs major mode that includes features specifically designed for source code in that language.</p>
<p>Org can extract one or more source code blocks and write them to one or more source files—a process known as <em>tangling</em> in literate programming terminology.</p>
<p>For exporting and publishing, Org’s back-ends can format a source code block appropriately, often with native syntax highlighting.</p>
<p>For executing and compiling a source code block, the user can configure Org to select the appropriate compiler. Org provides facilities to collect the result of the execution or compiler output, insert it into the Org document, and/or export it. In addition to text results, Org can insert links to other data types, including audio, video, and graphics. Org can also link a compiler error message to the appropriate line in the source code block.</p>
<p>An important feature of Org’s management of source code blocks is the ability to pass variables, functions, and results to one another using a common syntax for source code blocks in any language. Although most literate programming facilities are restricted to one language or another, Org’s language-agnostic approach lets the literate programmer match each programming task with the appropriate computer language and to mix them all together in a single Org document. This interoperability among languages explains why Org’s source code management facility was named <em>Org Babel</em> by its originators, Eric Schulte and Dan Davison.</p>
<p>Org mode fulfills the promise of easy verification and maintenance of publishing reproducible research by keeping text, data, code, configuration settings of the execution environment, the results of the execution, and associated narratives, claims, references, and internal and external links in a single Org document.</p>
<p>Details of Org’s facilities for working with source code are described in the following sections.</p>
<table>
<thead>
<tr>
<th>• <a href="https://orgmode.org/org.html#Structure-of-Code-Blocks" target="_blank" rel="noopener">Structure of Code Blocks</a>:</th>
<th>Code block syntax described.</th>
</tr>
</thead>
<tbody>
<tr>
<td>• <a href="https://orgmode.org/org.html#Using-Header-Arguments" target="_blank" rel="noopener">Using Header Arguments</a>:</td>
<td>Different ways to set header arguments.</td>
</tr>
<tr>
<td>• <a href="https://orgmode.org/org.html#Environment-of-a-Code-Block" target="_blank" rel="noopener">Environment of a Code Block</a>:</td>
<td>Arguments, sessions, working directory…</td>
</tr>
<tr>
<td>• <a href="https://orgmode.org/org.html#Evaluating-Code-Blocks" target="_blank" rel="noopener">Evaluating Code Blocks</a>:</td>
<td>Place results of evaluation in the Org buffer.</td>
</tr>
<tr>
<td>• <a href="https://orgmode.org/org.html#Results-of-Evaluation" target="_blank" rel="noopener">Results of Evaluation</a>:</td>
<td>Choosing a results type, post-processing…</td>
</tr>
<tr>
<td>• <a href="https://orgmode.org/org.html#Exporting-Code-Blocks" target="_blank" rel="noopener">Exporting Code Blocks</a>:</td>
<td>Export contents and/or results.</td>
</tr>
<tr>
<td>• <a href="https://orgmode.org/org.html#Extracting-Source-Code" target="_blank" rel="noopener">Extracting Source Code</a>:</td>
<td>Create pure source code files.</td>
</tr>
<tr>
<td>• <a href="https://orgmode.org/org.html#Languages" target="_blank" rel="noopener">Languages</a>:</td>
<td>List of supported code block languages.</td>
</tr>
<tr>
<td>• <a href="https://orgmode.org/org.html#Editing-Source-Code" target="_blank" rel="noopener">Editing Source Code</a>:</td>
<td>Language major-mode editing.</td>
</tr>
<tr>
<td>• <a href="https://orgmode.org/org.html#Noweb-Reference-Syntax" target="_blank" rel="noopener">Noweb Reference Syntax</a>:</td>
<td>Literate programming in Org mode.</td>
</tr>
<tr>
<td>• <a href="https://orgmode.org/org.html#Library-of-Babel" target="_blank" rel="noopener">Library of Babel</a>:</td>
<td>Use and contribute to a library of useful code blocks.</td>
</tr>
<tr>
<td>• <a href="https://orgmode.org/org.html#Key-bindings-and-Useful-Functions" target="_blank" rel="noopener">Key bindings and Useful Functions</a>:</td>
<td>Work quickly with code blocks.</td>
</tr>
<tr>
<td>• <a href="https://orgmode.org/org.html#Batch-Execution" target="_blank" rel="noopener">Batch Execution</a>:</td>
<td>Call functions from the command line.</td>
</tr>
</tbody>
</table>
<hr>
<p>Next: <a href="https://orgmode.org/org.html#Using-Header-Arguments" target="_blank" rel="noopener">Using Header Arguments</a>, Up: <a href="https://orgmode.org/org.html#Working-with-Source-Code" target="_blank" rel="noopener">Working with Source Code</a>   [<a href="https://orgmode.org/org.html#SEC_Contents" target="_blank" rel="noopener">Contents</a>][<a href="https://orgmode.org/org.html#Main-Index" target="_blank" rel="noopener">Index</a>]</p>
<h3 id="14-1-Structure-of-Code-Blocks"><a href="#14-1-Structure-of-Code-Blocks" class="headerlink" title="14.1 Structure of Code Blocks"></a>14.1 Structure of Code Blocks</h3><p>Org offers two ways to structure source code in Org documents: in a source code block, and directly inline. Both specifications are shown below.</p>
<p>A source code block conforms to this structure:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#+NAME: &lt;name&gt;</span><br><span class="line">#+BEGIN_SRC &lt;language&gt; &lt;switches&gt; &lt;header arguments&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">#+END_SRC</span><br></pre></td></tr></table></figure>
<p>Do not be put-off by having to remember the source block syntax. Org mode offers a command for wrapping existing text in a block (see <a href="https://orgmode.org/org.html#Structure-Templates" target="_blank" rel="noopener">Structure Templates</a>). Org also works with other completion systems in Emacs, some of which predate Org and have custom domain-specific languages for defining templates. Regular use of templates reduces errors, increases accuracy, and maintains consistency.</p>
<p>An inline code block conforms to this structure:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src_&lt;language&gt;&#123;&lt;body&gt;&#125;</span><br></pre></td></tr></table></figure>
<p>or</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src_&lt;language&gt;[&lt;header arguments&gt;]&#123;&lt;body&gt;&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>‘#+NAME: <name>’</name></p>
<p>Optional. Names the source block so it can be called, like a function, from other source blocks or inline code to evaluate or to capture the results. Code from other blocks, other files, and from table formulas (see <a href="https://orgmode.org/org.html#The-Spreadsheet" target="_blank" rel="noopener">The Spreadsheet</a>) can use the name to reference a source block. This naming serves the same purpose as naming Org tables. Org mode requires unique names. For duplicate names, Org mode’s behavior is undefined.</p>
</li>
<li><p>‘#+BEGIN_SRC’ … ‘#+END_SRC’</p>
<p>Mandatory. They mark the start and end of a block that Org requires. The ‘#+BEGIN_SRC’ line takes additional arguments, as described next.</p>
</li>
<li><p>‘<language>’</language></p>
<p>Mandatory. It is the identifier of the source code language in the block. See <a href="https://orgmode.org/org.html#Languages" target="_blank" rel="noopener">Languages</a>, for identifiers of supported languages.</p>
</li>
<li><p>‘<switches>’</switches></p>
<p>Optional. Switches provide finer control of the code execution, export, and format (see the discussion of switches in <a href="https://orgmode.org/org.html#Literal-Examples" target="_blank" rel="noopener">Literal Examples</a>).</p>
</li>
<li><p>‘<header arguments>’</header></p>
<p>Optional. Heading arguments control many aspects of evaluation, export and tangling of code blocks (see <a href="https://orgmode.org/org.html#Using-Header-Arguments" target="_blank" rel="noopener">Using Header Arguments</a>). Using Org’s properties feature, header arguments can be selectively applied to the entire buffer or specific sub-trees of the Org document.</p>
</li>
<li><p>‘<body>’</body></p>
<p>Source code in the dialect of the specified language identifier.</p>
</li>
</ul>
<hr>
<p>Next: <a href="https://orgmode.org/org.html#Environment-of-a-Code-Block" target="_blank" rel="noopener">Environment of a Code Block</a>, Previous: <a href="https://orgmode.org/org.html#Structure-of-Code-Blocks" target="_blank" rel="noopener">Structure of Code Blocks</a>, Up: <a href="https://orgmode.org/org.html#Working-with-Source-Code" target="_blank" rel="noopener">Working with Source Code</a>   [<a href="https://orgmode.org/org.html#SEC_Contents" target="_blank" rel="noopener">Contents</a>][<a href="https://orgmode.org/org.html#Main-Index" target="_blank" rel="noopener">Index</a>]</p>
<h3 id="14-2-Using-Header-Arguments"><a href="#14-2-Using-Header-Arguments" class="headerlink" title="14.2 Using Header Arguments"></a>14.2 Using Header Arguments</h3><p>Org comes with many header arguments common to all languages. New header arguments are added for specific languages as they become available for use in source code blocks. A header argument is specified with an initial colon followed by the argument’s name in lowercase.</p>
<p>Since header arguments can be set in several ways, Org prioritizes them in case of overlaps or conflicts by giving local settings a higher priority. Header values in function calls, for example, override header values from global defaults.</p>
<h4 id="System-wide-header-arguments"><a href="#System-wide-header-arguments" class="headerlink" title="System-wide header arguments"></a>System-wide header arguments</h4><p>System-wide values of header arguments can be specified by customizing the <code>org-babel-default-header-args</code> variable, which defaults to the following values:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">:session    =&gt; &quot;none&quot;</span><br><span class="line">:results    =&gt; &quot;replace&quot;</span><br><span class="line">:exports    =&gt; &quot;code&quot;</span><br><span class="line">:cache      =&gt; &quot;no&quot;</span><br><span class="line">:noweb      =&gt; &quot;no&quot;</span><br></pre></td></tr></table></figure>
<p>The example below sets ‘:noweb’ header arguments to ‘yes’, which makes Org expand ‘:noweb’ references by default.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(setq org-babel-default-header-args</span><br><span class="line">      (cons &apos;(:noweb . &quot;yes&quot;)</span><br><span class="line">            (assq-delete-all :noweb org-babel-default-header-args)))</span><br></pre></td></tr></table></figure>
<p>Each language can have separate default header arguments by customizing the variable <code>org-babel-default-header-args:&lt;LANG&gt;</code>, where <lang> is the name of the language. For details, see the language-specific online documentation at <a href="https://orgmode.org/worg/org-contrib/babel/" target="_blank" rel="noopener">https://orgmode.org/worg/org-contrib/babel/</a>.</lang></p>
<h4 id="Header-arguments-in-Org-mode-properties"><a href="#Header-arguments-in-Org-mode-properties" class="headerlink" title="Header arguments in Org mode properties"></a>Header arguments in Org mode properties</h4><p>For header arguments applicable to the buffer, use ‘PROPERTY’ keyword anywhere in the Org file (see <a href="https://orgmode.org/org.html#Property-Syntax" target="_blank" rel="noopener">Property Syntax</a>).</p>
<p>The following example makes all the R code blocks execute in the same session. Setting ‘:results’ to ‘silent’ ignores the results of executions for all blocks, not just R code blocks; no results inserted for any block.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#+PROPERTY: header-args:R  :session *R*</span><br><span class="line">#+PROPERTY: header-args    :results silent</span><br></pre></td></tr></table></figure>
<p>Header arguments set through Org’s property drawers (see <a href="https://orgmode.org/org.html#Property-Syntax" target="_blank" rel="noopener">Property Syntax</a>) apply at the sub-tree level on down. Since these property drawers can appear anywhere in the file hierarchy, Org uses outermost call or source block to resolve the values. Org ignores <code>org-use-property-inheritance</code> setting.</p>
<p>In this example, ‘:cache’ defaults to ‘yes’ for all code blocks in the sub-tree.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* sample header</span><br><span class="line">  :PROPERTIES:</span><br><span class="line">  :header-args:    :cache yes</span><br><span class="line">  :END:</span><br></pre></td></tr></table></figure>
<p>Properties defined through <code>org-set-property</code> function, bound to C-c C-x p, apply to all active languages. They override properties set in <code>org-babel-default-header-args</code>.</p>
<p>Language-specific header arguments are also read from properties ‘header-args:<lang>’ where <lang> is the language identifier. For example,</lang></lang></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* Heading</span><br><span class="line">  :PROPERTIES:</span><br><span class="line">  :header-args:clojure:    :session *clojure-1*</span><br><span class="line">  :header-args:R:          :session *R*</span><br><span class="line">  :END:</span><br><span class="line">** Subheading</span><br><span class="line">  :PROPERTIES:</span><br><span class="line">  :header-args:clojure:    :session *clojure-2*</span><br><span class="line">  :END:</span><br></pre></td></tr></table></figure>
<p>would force separate sessions for Clojure blocks in ‘Heading’ and ‘Subheading’, but use the same session for all R blocks. Blocks in ‘Subheading’ inherit settings from ‘Heading’.</p>
<h4 id="Code-block-specific-header-arguments"><a href="#Code-block-specific-header-arguments" class="headerlink" title="Code block specific header arguments"></a>Code block specific header arguments</h4><p>Header arguments are most commonly set at the source code block level, on the ‘#+BEGIN_SRC’ line. Arguments set at this level take precedence over those set in the <code>org-babel-default-header-args</code> variable, and also those set as header properties.</p>
<p>In the following example, setting ‘:results’ to ‘silent’ makes it ignore results of the code execution. Setting ‘:exports’ to ‘code’ exports only the body of the code block to HTML or LaTeX.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#+NAME: factorial</span><br><span class="line">#+BEGIN_SRC haskell :results silent :exports code :var n=0</span><br><span class="line">  fac 0 = 1</span><br><span class="line">  fac n = n * fac (n-1)</span><br><span class="line">#+END_SRC</span><br></pre></td></tr></table></figure>
<p>The same header arguments in an inline code block:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src_haskell[:exports both]&#123;fac 5&#125;</span><br></pre></td></tr></table></figure>
<p>Code block header arguments can span multiple lines using ‘#+HEADER:’ on each line. Note that Org currently accepts the plural spelling of ‘#+HEADER:’ only as a convenience for backward-compatibility. It may be removed at some point.</p>
<p>Multi-line header arguments on an unnamed code block:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#+HEADER: :var data1=1</span><br><span class="line">#+BEGIN_SRC emacs-lisp :var data2=2</span><br><span class="line">   (message &quot;data1:%S, data2:%S&quot; data1 data2)</span><br><span class="line">#+END_SRC</span><br><span class="line"></span><br><span class="line">#+RESULTS:</span><br><span class="line">: data1:1, data2:2</span><br></pre></td></tr></table></figure>
<p>Multi-line header arguments on a named code block:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#+NAME: named-block</span><br><span class="line">#+HEADER: :var data=2</span><br><span class="line">#+BEGIN_SRC emacs-lisp</span><br><span class="line">  (message &quot;data:%S&quot; data)</span><br><span class="line">#+END_SRC</span><br><span class="line"></span><br><span class="line">#+RESULTS: named-block</span><br><span class="line">  : data:2</span><br></pre></td></tr></table></figure>
<h4 id="Header-arguments-in-function-calls"><a href="#Header-arguments-in-function-calls" class="headerlink" title="Header arguments in function calls"></a>Header arguments in function calls</h4><p>Header arguments in function calls are the most specific and override all other settings in case of an overlap. They get the highest priority. Two ‘#+CALL:’ examples are shown below. For the complete syntax of ‘CALL’ keyword, see <a href="https://orgmode.org/org.html#Evaluating-Code-Blocks" target="_blank" rel="noopener">Evaluating Code Blocks</a>.</p>
<p>In this example, ‘:exports results’ header argument is applied to the evaluation of the ‘#+CALL:’ line.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#+CALL: factorial(n=5) :exports results</span><br></pre></td></tr></table></figure>
<p>In this example, ‘:session special’ header argument is applied to the evaluation of ‘factorial’ code block.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#+CALL: factorial[:session special](n=5)</span><br></pre></td></tr></table></figure>
<hr>
<p>Next: <a href="https://orgmode.org/org.html#Evaluating-Code-Blocks" target="_blank" rel="noopener">Evaluating Code Blocks</a>, Previous: <a href="https://orgmode.org/org.html#Using-Header-Arguments" target="_blank" rel="noopener">Using Header Arguments</a>, Up: <a href="https://orgmode.org/org.html#Working-with-Source-Code" target="_blank" rel="noopener">Working with Source Code</a>   [<a href="https://orgmode.org/org.html#SEC_Contents" target="_blank" rel="noopener">Contents</a>][<a href="https://orgmode.org/org.html#Main-Index" target="_blank" rel="noopener">Index</a>]</p>
<h3 id="14-3-Environment-of-a-Code-Block"><a href="#14-3-Environment-of-a-Code-Block" class="headerlink" title="14.3 Environment of a Code Block"></a>14.3 Environment of a Code Block</h3><h4 id="Passing-arguments"><a href="#Passing-arguments" class="headerlink" title="Passing arguments"></a>Passing arguments</h4><p>Use ‘var’ for passing arguments to source code blocks. The specifics of variables in code blocks vary by the source language and are covered in the language-specific documentation. The syntax for ‘var’, however, is the same for all languages. This includes declaring a variable, and assigning a default value.</p>
<p>The following syntax is used to pass arguments to code blocks using the ‘var’ header argument.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:var NAME=ASSIGN</span><br></pre></td></tr></table></figure>
<p>NAME is the name of the variable bound in the code block body. ASSIGN is a literal value, such as a string, a number, a reference to a table, a list, a literal example, another code block—with or without arguments—or the results of evaluating a code block.</p>
<p>Here are examples of passing values by reference:</p>
<ul>
<li><p>table</p>
<p>A table named with a ‘NAME’ keyword.<code>#+NAME: example-table | 1 | | 2 | | 3 | | 4 |  #+NAME: table-length #+BEGIN_SRC emacs-lisp :var table=example-table   (length table) #+END_SRC  #+RESULTS: table-length : 4</code>When passing a table, you can treat specially the row, or the column, containing labels for the columns, or the rows, in the table.The ‘colnames’ header argument accepts ‘yes’, ‘no’, or ‘nil’ values. The default value is ‘nil’: if an input table has column names—because the second row is a horizontal rule—then Org removes the column names, processes the table, puts back the column names, and then writes the table to the results block. Using ‘yes’, Org does the same to the first row, even if the initial table does not contain any horizontal rule. When set to ‘no’, Org does not pre-process column names at all.<code>#+NAME: less-cols | a | |---| | b | | c |  #+BEGIN_SRC python :var tab=less-cols :colnames nil   return [[val + &#39;*&#39; for val in row] for row in tab] #+END_SRC  #+RESULTS: | a  | |----| | b* | | c* |</code>Similarly, the ‘rownames’ header argument can take two values: ‘yes’ or ‘no’. When set to ‘yes’, Org removes the first column, processes the table, puts back the first column, and then writes the table to the results block. The default is ‘no’, which means Org does not pre-process the first column. Note that Emacs Lisp code blocks ignore ‘rownames’ header argument because of the ease of table-handling in Emacs.<code>#+NAME: with-rownames | one | 1 | 2 | 3 | 4 |  5 | | two | 6 | 7 | 8 | 9 | 10 |  #+BEGIN_SRC python :var tab=with-rownames :rownames yes   return [[val + 10 for val in row] for row in tab] #+END_SRC  #+RESULTS: | one | 11 | 12 | 13 | 14 | 15 | | two | 16 | 17 | 18 | 19 | 20 |</code></p>
</li>
<li><p>list</p>
<p>A simple named list.<code>#+NAME: example-list - simple   - not   - nested - list  #+BEGIN_SRC emacs-lisp :var x=example-list   (print x) #+END_SRC  #+RESULTS: | simple | list |</code>Note that only the top level list items are passed along. Nested list items are ignored.</p>
</li>
<li><p>code block without arguments</p>
<p>A code block name, as assigned by ‘NAME’ keyword from the example above, optionally followed by parentheses.<code>#+BEGIN_SRC emacs-lisp :var length=table-length()   (* 2 length) #+END_SRC  #+RESULTS: : 8</code></p>
</li>
<li><p>code block with arguments</p>
<p>A code block name, as assigned by ‘NAME’ keyword, followed by parentheses and optional arguments passed within the parentheses.<code>#+NAME: double #+BEGIN_SRC emacs-lisp :var input=8   (* 2 input) #+END_SRC  #+RESULTS: double : 16  #+NAME: squared #+BEGIN_SRC emacs-lisp :var input=double(input=1)   (* input input) #+END_SRC  #+RESULTS: squared : 4</code></p>
</li>
<li><p>literal example</p>
<p>A literal example block named with a ‘NAME’ keyword.<code>#+NAME: literal-example #+BEGIN_EXAMPLE   A literal example   on two lines #+END_EXAMPLE  #+NAME: read-literal-example #+BEGIN_SRC emacs-lisp :var x=literal-example   (concatenate #&#39;string x &quot; for you.&quot;) #+END_SRC  #+RESULTS: read-literal-example : A literal example : on two lines for you.</code></p>
</li>
</ul>
<p>Indexing variable values enables referencing portions of a variable. Indexes are 0 based with negative values counting backwards from the end. If an index is separated by commas then each subsequent section indexes as the next dimension. Note that this indexing occurs <em>before</em> other table-related header arguments are applied, such as ‘hlines’, ‘colnames’ and ‘rownames’. The following example assigns the last cell of the first row the table ‘example-table’ to the variable ‘data’:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#+NAME: example-table</span><br><span class="line">| 1 | a |</span><br><span class="line">| 2 | b |</span><br><span class="line">| 3 | c |</span><br><span class="line">| 4 | d |</span><br><span class="line"></span><br><span class="line">#+BEGIN_SRC emacs-lisp :var data=example-table[0,-1]</span><br><span class="line">  data</span><br><span class="line">#+END_SRC</span><br><span class="line"></span><br><span class="line">#+RESULTS:</span><br><span class="line">: a</span><br></pre></td></tr></table></figure>
<p>Two integers separated by a colon reference a range of variable values. In that case the entire inclusive range is referenced. For example the following assigns the middle three rows of ‘example-table’ to ‘data’.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#+NAME: example-table</span><br><span class="line">| 1 | a |</span><br><span class="line">| 2 | b |</span><br><span class="line">| 3 | c |</span><br><span class="line">| 4 | d |</span><br><span class="line">| 5 | 3 |</span><br><span class="line"></span><br><span class="line">#+BEGIN_SRC emacs-lisp :var data=example-table[1:3]</span><br><span class="line">  data</span><br><span class="line">#+END_SRC</span><br><span class="line"></span><br><span class="line">#+RESULTS:</span><br><span class="line">| 2 | b |</span><br><span class="line">| 3 | c |</span><br><span class="line">| 4 | d |</span><br></pre></td></tr></table></figure>
<p>To pick the entire range, use an empty index, or the single character ‘*’. ‘0:-1’ does the same thing. Example below shows how to reference the first column only.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#+NAME: example-table</span><br><span class="line">| 1 | a |</span><br><span class="line">| 2 | b |</span><br><span class="line">| 3 | c |</span><br><span class="line">| 4 | d |</span><br><span class="line"></span><br><span class="line">#+BEGIN_SRC emacs-lisp :var data=example-table[,0]</span><br><span class="line">  data</span><br><span class="line">#+END_SRC</span><br><span class="line"></span><br><span class="line">#+RESULTS:</span><br><span class="line">| 1 | 2 | 3 | 4 |</span><br></pre></td></tr></table></figure>
<p>Index referencing can be used for tables and code blocks. Index referencing can handle any number of dimensions. Commas delimit multiple dimensions, as shown below.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#+NAME: 3D</span><br><span class="line">#+BEGIN_SRC emacs-lisp</span><br><span class="line">  &apos;(((1  2  3)  (4  5  6)  (7  8  9))</span><br><span class="line">    ((10 11 12) (13 14 15) (16 17 18))</span><br><span class="line">    ((19 20 21) (22 23 24) (25 26 27)))</span><br><span class="line">#+END_SRC</span><br><span class="line"></span><br><span class="line">#+BEGIN_SRC emacs-lisp :var data=3D[1,,1]</span><br><span class="line">  data</span><br><span class="line">#+END_SRC</span><br><span class="line"></span><br><span class="line">#+RESULTS:</span><br><span class="line">| 11 | 14 | 17 |</span><br></pre></td></tr></table></figure>
<p>Note that row names and column names are not removed prior to variable indexing. You need to take them into account, even when ‘colnames’ or ‘rownames’ header arguments remove them.</p>
<p>Emacs lisp code can also set the values for variables. To differentiate a value from Lisp code, Org interprets any value starting with ‘(’, ‘[’, ‘’’ or ‘`’ as Emacs Lisp code. The result of evaluating that code is then assigned to the value of that variable. The following example shows how to reliably query and pass the file name of the Org mode buffer to a code block using headers. We need reliability here because the file’s name could change once the code in the block starts executing.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#+BEGIN_SRC sh :var filename=(buffer-file-name) :exports both</span><br><span class="line">  wc -w $filename</span><br><span class="line">#+END_SRC</span><br></pre></td></tr></table></figure>
<p>Note that values read from tables and lists are not mistakenly evaluated as Emacs Lisp code, as illustrated in the following example.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#+NAME: table</span><br><span class="line">| (a b c) |</span><br><span class="line"></span><br><span class="line">#+HEADER: :var data=table[0,0]</span><br><span class="line">#+BEGIN_SRC perl</span><br><span class="line">  $data</span><br><span class="line">#+END_SRC</span><br><span class="line"></span><br><span class="line">#+RESULTS:</span><br><span class="line">: (a b c)</span><br></pre></td></tr></table></figure>
<h4 id="Using-sessions"><a href="#Using-sessions" class="headerlink" title="Using sessions"></a>Using sessions</h4><p>Two code blocks can share the same environment. The ‘session’ header argument is for running multiple source code blocks under one session. Org runs code blocks with the same session name in the same interpreter process.</p>
<ul>
<li><p>‘none’</p>
<p>Default. Each code block gets a new interpreter process to execute. The process terminates once the block is evaluated.</p>
</li>
<li><p>STRING</p>
<p>Any string besides ‘none’ turns that string into the name of that session. For example, ‘:session STRING’ names it ‘STRING’. If ‘session’ has no value, then the session name is derived from the source language identifier. Subsequent blocks with the same source code language use the same session. Depending on the language, state variables, code from other blocks, and the overall interpreted environment may be shared. Some interpreted languages support concurrent sessions when subsequent source code language blocks change session names.</p>
</li>
</ul>
<p>Only languages that provide interactive evaluation can have session support. Not all languages provide this support, such as C and ditaa. Even languages, such as Python and Haskell, that do support interactive evaluation impose limitations on allowable language constructs that can run interactively. Org inherits those limitations for those code blocks running in a session.</p>
<h4 id="Choosing-a-working-directory"><a href="#Choosing-a-working-directory" class="headerlink" title="Choosing a working directory"></a>Choosing a working directory</h4><p>The ‘dir’ header argument specifies the default directory during code block execution. If it is absent, then the directory associated with the current buffer is used. In other words, supplying ‘:dir PATH’ temporarily has the same effect as changing the current directory with M-x cd PATH, and then not setting ‘dir’. Under the surface, ‘dir’ simply sets the value of the Emacs variable <code>default-directory</code>.</p>
<p>For example, to save the plot file in the ‘Work/’ folder of the home directory—notice tilde is expanded:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#+BEGIN_SRC R :file myplot.png :dir ~/Work</span><br><span class="line">  matplot(matrix(rnorm(100), 10), type=&quot;l&quot;)</span><br><span class="line">#+END_SRC</span><br></pre></td></tr></table></figure>
<p>To evaluate the code block on a remote machine, supply a remote directory name using Tramp syntax. For example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#+BEGIN_SRC R :file plot.png :dir /scp:dand@yakuba.princeton.edu:</span><br><span class="line">  plot(1:10, main=system(&quot;hostname&quot;, intern=TRUE))</span><br><span class="line">#+END_SRC</span><br></pre></td></tr></table></figure>
<p>Org first captures the text results as usual for insertion in the Org file. Then Org also inserts a link to the remote file, thanks to Emacs Tramp. Org constructs the remote path to the file name from ‘dir’ and <code>default-directory</code>, as illustrated here:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[file:/scp:dand@yakuba.princeton.edu:/home/dand/plot.png][plot.png]]</span><br></pre></td></tr></table></figure>
<p>When ‘dir’ is used with ‘session’, Org sets the starting directory for a new session. But Org does not alter the directory of an already existing session.</p>
<p>Do not use ‘dir’ with ‘:exports results’ or with ‘:exports both’ to avoid Org inserting incorrect links to remote files. That is because Org does not expand <code>default directory</code> to avoid some underlying portability issues.</p>
<h4 id="Inserting-headers-and-footers"><a href="#Inserting-headers-and-footers" class="headerlink" title="Inserting headers and footers"></a>Inserting headers and footers</h4><p>The ‘prologue’ header argument is for appending to the top of the code block for execution, like a reset instruction. For example, you may use ‘:prologue “reset”’ in a Gnuplot code block or, for every such block:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(add-to-list &apos;org-babel-default-header-args:gnuplot</span><br><span class="line">             &apos;((:prologue . &quot;reset&quot;)))</span><br></pre></td></tr></table></figure>
<p>Likewise, the value of the ‘epilogue’ header argument is for appending to the end of the code block for execution.</p>
<hr>
<p>Next: <a href="https://orgmode.org/org.html#Results-of-Evaluation" target="_blank" rel="noopener">Results of Evaluation</a>, Previous: <a href="https://orgmode.org/org.html#Environment-of-a-Code-Block" target="_blank" rel="noopener">Environment of a Code Block</a>, Up: <a href="https://orgmode.org/org.html#Working-with-Source-Code" target="_blank" rel="noopener">Working with Source Code</a>   [<a href="https://orgmode.org/org.html#SEC_Contents" target="_blank" rel="noopener">Contents</a>][<a href="https://orgmode.org/org.html#Main-Index" target="_blank" rel="noopener">Index</a>]</p>
<h3 id="14-4-Evaluating-Code-Blocks"><a href="#14-4-Evaluating-Code-Blocks" class="headerlink" title="14.4 Evaluating Code Blocks"></a>14.4 Evaluating Code Blocks</h3><p>A note about security: With code evaluation comes the risk of harm. Org safeguards by prompting for user’s permission before executing any code in the source block. To customize this safeguard, or disable it, see <a href="https://orgmode.org/org.html#Code-Evaluation-Security" target="_blank" rel="noopener">Code Evaluation Security</a>.</p>
<h4 id="How-to-evaluate-source-code"><a href="#How-to-evaluate-source-code" class="headerlink" title="How to evaluate source code"></a>How to evaluate source code</h4><p>Org captures the results of the code block evaluation and inserts them in the Org file, right after the code block. The insertion point is after a newline and the ‘RESULTS’ keyword. Org creates the ‘RESULTS’ keyword if one is not already there.</p>
<p>By default, Org enables only Emacs Lisp code blocks for execution. See <a href="https://orgmode.org/org.html#Languages" target="_blank" rel="noopener">Languages</a> to enable other languages.</p>
<p>Org provides many ways to execute code blocks. C-c C-c or C-c C-v e with the point on a code block<a href="https://orgmode.org/org.html#FOOT141" target="_blank" rel="noopener">141</a> calls the <code>org-babel-execute-src-block</code> function, which executes the code in the block, collects the results, and inserts them in the buffer.</p>
<p>By calling a named code block<a href="https://orgmode.org/org.html#FOOT142" target="_blank" rel="noopener">142</a> from an Org mode buffer or a table. Org can call the named code blocks from the current Org mode buffer or from the “Library of Babel” (see <a href="https://orgmode.org/org.html#Library-of-Babel" target="_blank" rel="noopener">Library of Babel</a>).</p>
<p>The syntax for ‘CALL’ keyword is:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#+CALL: &lt;name&gt;(&lt;arguments&gt;)</span><br><span class="line">#+CALL: &lt;name&gt;[&lt;inside header arguments&gt;](&lt;arguments&gt;) &lt;end header arguments&gt;</span><br></pre></td></tr></table></figure>
<p>The syntax for inline named code blocks is:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">... call_&lt;name&gt;(&lt;arguments&gt;) ...</span><br><span class="line">... call_&lt;name&gt;[&lt;inside header arguments&gt;](&lt;arguments&gt;)[&lt;end header arguments&gt;] ...</span><br></pre></td></tr></table></figure>
<p>When inline syntax is used, the result is wrapped based on the variable <code>org-babel-inline-result-wrap</code>, which by default is set to <code>&quot;=%s=&quot;</code> to produce verbatim text suitable for markup.</p>
<ul>
<li><p>‘<name>’</name></p>
<p>This is the name of the code block (see <a href="https://orgmode.org/org.html#Structure-of-Code-Blocks" target="_blank" rel="noopener">Structure of Code Blocks</a>) to be evaluated in the current document. If the block is located in another file, start ‘<name>’ with the file name followed by a colon. For example, in order to execute a block named ‘clear-data’ in ‘file.org’, you can write the following:<code>#+CALL: file.org:clear-data()</code></name></p>
</li>
<li><p>‘<arguments>’</arguments></p>
<p>Org passes arguments to the code block using standard function call syntax. For example, a ‘#+CALL:’ line that passes ‘4’ to a code block named ‘double’, which declares the header argument ‘:var n=2’, would be written as:<code>#+CALL: double(n=4)</code>Note how this function call syntax is different from the header argument syntax.</p>
</li>
<li><p>‘<inside header arguments>’</inside></p>
<p>Org passes inside header arguments to the named code block using the header argument syntax. Inside header arguments apply to code block evaluation. For example, ‘[:results output]’ collects results printed to stdout during code execution of that block. Note how this header argument syntax is different from the function call syntax.</p>
</li>
<li><p>‘<end header arguments>’</end></p>
<p>End header arguments affect the results returned by the code block. For example, ‘:results html’ wraps the results in a ‘#+BEGIN_EXPORT html’ block before inserting the results in the Org buffer.</p>
</li>
</ul>
<h4 id="Limit-code-block-evaluation"><a href="#Limit-code-block-evaluation" class="headerlink" title="Limit code block evaluation"></a>Limit code block evaluation</h4><p>The ‘eval’ header argument can limit evaluation of specific code blocks and ‘CALL’ keyword. It is useful for protection against evaluating untrusted code blocks by prompting for a confirmation.</p>
<ul>
<li><p>‘never’ or ‘no’</p>
<p>Org never evaluates the source code.</p>
</li>
<li><p>‘query’</p>
<p>Org prompts the user for permission to evaluate the source code.</p>
</li>
<li><p>‘never-export’ or ‘no-export’</p>
<p>Org does not evaluate the source code when exporting, yet the user can evaluate it interactively.</p>
</li>
<li><p>‘query-export’</p>
<p>Org prompts the user for permission to evaluate the source code during export.</p>
</li>
</ul>
<p>If ‘eval’ header argument is not set, then Org determines whether to evaluate the source code from the <code>org-confirm-babel-evaluate</code> variable (see <a href="https://orgmode.org/org.html#Code-Evaluation-Security" target="_blank" rel="noopener">Code Evaluation Security</a>).</p>
<h4 id="Cache-results-of-evaluation"><a href="#Cache-results-of-evaluation" class="headerlink" title="Cache results of evaluation"></a>Cache results of evaluation</h4><p>The ‘cache’ header argument is for caching results of evaluating code blocks. Caching results can avoid re-evaluating a code block that have not changed since the previous run. To benefit from the cache and avoid redundant evaluations, the source block must have a result already present in the buffer, and neither the header arguments—including the value of ‘var’ references—nor the text of the block itself has changed since the result was last computed. This feature greatly helps avoid long-running calculations. For some edge cases, however, the cached results may not be reliable.</p>
<p>The caching feature is best for when code blocks are pure functions, that is functions that return the same value for the same input arguments (see <a href="https://orgmode.org/org.html#Environment-of-a-Code-Block" target="_blank" rel="noopener">Environment of a Code Block</a>), and that do not have side effects, and do not rely on external variables other than the input arguments. Functions that depend on a timer, file system objects, and random number generators are clearly unsuitable for caching.</p>
<p>A note of warning: when ‘cache’ is used in a session, caching may cause unexpected results.</p>
<p>When the caching mechanism tests for any source code changes, it does not expand Noweb style references (see <a href="https://orgmode.org/org.html#Noweb-Reference-Syntax" target="_blank" rel="noopener">Noweb Reference Syntax</a>). For reasons why, see <a href="http://thread.gmane.org/gmane.emacs.orgmode/79046" target="_blank" rel="noopener">http://thread.gmane.org/gmane.emacs.orgmode/79046</a>.</p>
<p>The ‘cache’ header argument can have one of two values: ‘yes’ or ‘no’.</p>
<ul>
<li><p>‘no’</p>
<p>Default. No caching of results; code block evaluated every time.</p>
</li>
<li><p>‘yes’</p>
<p>Whether to run the code or return the cached results is determined by comparing the SHA1 hash value of the combined code block and arguments passed to it. This hash value is packed on the ‘#+RESULTS:’ line from previous evaluation. When hash values match, Org does not evaluate the code block. When hash values mismatch, Org evaluates the code block, inserts the results, recalculates the hash value, and updates ‘#+RESULTS:’ line.</p>
</li>
</ul>
<p>In this example, both functions are cached. But ‘caller’ runs only if the result from ‘random’ has changed since the last run.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#+NAME: random</span><br><span class="line">#+BEGIN_SRC R :cache yes</span><br><span class="line">  runif(1)</span><br><span class="line">#+END_SRC</span><br><span class="line"></span><br><span class="line">#+RESULTS[a2a72cd647ad44515fab62e144796432793d68e1]: random</span><br><span class="line">0.4659510825295</span><br><span class="line"></span><br><span class="line">#+NAME: caller</span><br><span class="line">#+BEGIN_SRC emacs-lisp :var x=random :cache yes</span><br><span class="line">  x</span><br><span class="line">#+END_SRC</span><br><span class="line"></span><br><span class="line">#+RESULTS[bec9c8724e397d5df3b696502df3ed7892fc4f5f]: caller</span><br><span class="line">0.254227238707244</span><br></pre></td></tr></table></figure>
<hr>
<p>Next: <a href="https://orgmode.org/org.html#Exporting-Code-Blocks" target="_blank" rel="noopener">Exporting Code Blocks</a>, Previous: <a href="https://orgmode.org/org.html#Evaluating-Code-Blocks" target="_blank" rel="noopener">Evaluating Code Blocks</a>, Up: <a href="https://orgmode.org/org.html#Working-with-Source-Code" target="_blank" rel="noopener">Working with Source Code</a>   [<a href="https://orgmode.org/org.html#SEC_Contents" target="_blank" rel="noopener">Contents</a>][<a href="https://orgmode.org/org.html#Main-Index" target="_blank" rel="noopener">Index</a>]</p>
<h3 id="14-5-Results-of-Evaluation"><a href="#14-5-Results-of-Evaluation" class="headerlink" title="14.5 Results of Evaluation"></a>14.5 Results of Evaluation</h3><p>How Org handles results of a code block execution depends on many header arguments working together. The primary determinant, however, is the ‘results’ header argument. It accepts four classes of options. Each code block can take only one option per class:</p>
<ul>
<li><p>collection</p>
<p>For how the results should be collected from the code block;</p>
</li>
<li><p>type</p>
<p>For which type of result the code block will return; affects how Org processes and inserts results in the Org buffer;</p>
</li>
<li><p>format</p>
<p>For the result; affects how Org processes and inserts results in the Org buffer;</p>
</li>
<li><p>handling</p>
<p>For processing results after evaluation of the code block;</p>
</li>
</ul>
<h4 id="Collection"><a href="#Collection" class="headerlink" title="Collection"></a>Collection</h4><p>Collection options specify the results. Choose one of the options; they are mutually exclusive.</p>
<ul>
<li><p>‘value’</p>
<p>Default. Functional mode. Org gets the value by wrapping the code in a function definition in the language of the source block. That is why when using ‘:results value’, code should execute like a function and return a value. For languages like Python, an explicit <code>return</code> statement is mandatory when using ‘:results value’. Result is the value returned by the last statement in the code block.When evaluating the code block in a session (see <a href="https://orgmode.org/org.html#Environment-of-a-Code-Block" target="_blank" rel="noopener">Environment of a Code Block</a>), Org passes the code to an interpreter running as an interactive Emacs inferior process. Org gets the value from the source code interpreter’s last statement output. Org has to use language-specific methods to obtain the value. For example, from the variable <code>_</code> in Python and Ruby, and the value of <code>.Last.value</code> in R.</p>
</li>
<li><p>‘output’</p>
<p>Scripting mode. Org passes the code to an external process running the interpreter. Org returns the contents of the standard output stream as text results.When using a session, Org passes the code to the interpreter running as an interactive Emacs inferior process. Org concatenates any text output from the interpreter and returns the collection as a result.Note that this collection is not the same as that would be collected from stdout of a non-interactive interpreter running as an external process. Compare for example these two blocks:<code>#+BEGIN_SRC python :results output   print &quot;hello&quot;   2   print &quot;bye&quot; #+END_SRC  #+RESULTS: : hello : bye</code>In the above non-session mode, the “2” is not printed; so it does not appear in results.<code>#+BEGIN_SRC python :results output :session   print &quot;hello&quot;   2   print &quot;bye&quot; #+END_SRC  #+RESULTS: : hello : 2 : bye</code>In the above session, the interactive interpreter receives and prints “2”. Results show that.</p>
</li>
</ul>
<h4 id="Type"><a href="#Type" class="headerlink" title="Type"></a>Type</h4><p>Type tells what result types to expect from the execution of the code block. Choose one of the options; they are mutually exclusive. The default behavior is to automatically determine the result type.</p>
<ul>
<li><p>‘table’</p>
</li>
<li><p>‘vector’</p>
<p>Interpret the results as an Org table. If the result is a single value, create a table with one row and one column. Usage example: ‘:results value table’.In-between each table row or below the table headings, sometimes results have horizontal lines, which are also known as “hlines”. The ‘hlines’ argument with the default ‘no’ value strips such lines from the input table. For most code, this is desirable, or else those ‘hline’ symbols raise unbound variable errors. A ‘yes’ accepts such lines, as demonstrated in the following example.<code>#+NAME: many-cols | a | b | c | |---+---+---| | d | e | f | |---+---+---| | g | h | i |  #+NAME: no-hline #+BEGIN_SRC python :var tab=many-cols :hlines no   return tab #+END_SRC  #+RESULTS: no-hline | a | b | c | | d | e | f | | g | h | i |  #+NAME: hlines #+BEGIN_SRC python :var tab=many-cols :hlines yes   return tab #+END_SRC  #+RESULTS: hlines | a | b | c | |---+---+---| | d | e | f | |---+---+---| | g | h | i |</code></p>
</li>
<li><p>‘list’</p>
<p>Interpret the results as an Org list. If the result is a single value, create a list of one element.</p>
</li>
<li><p>‘scalar’</p>
</li>
<li><p>‘verbatim’</p>
<p>Interpret literally and insert as quoted text. Do not create a table. Usage example: ‘:results value verbatim’.</p>
</li>
<li><p>‘file’</p>
<p>Interpret as a filename. Save the results of execution of the code block to that file, then insert a link to it. You can control both the filename and the description associated to the link.Org first tries to generate the filename from the value of the ‘file’ header argument and the directory specified using the ‘output-dir’ header arguments. If ‘output-dir’ is not specified, Org assumes it is the current directory.<code>#+BEGIN_SRC asymptote :results value file :file circle.pdf :output-dir img/   size(2cm);   draw(unitcircle); #+END_SRC</code>If ‘file’ is missing, Org generates the base name of the output file from the name of the code block, and its extension from the ‘file-ext’ header argument. In that case, both the name and the extension are mandatory<a href="https://orgmode.org/org.html#FOOT143" target="_blank" rel="noopener">143</a>.<code>#+name: circle #+BEGIN_SRC asymptote :results value file :file-ext pdf   size(2cm);   draw(unitcircle); #+END_SRC</code>The ‘file-desc’ header argument defines the description (see <a href="https://orgmode.org/org.html#Link-Format" target="_blank" rel="noopener">Link Format</a>) for the link. If ‘file-desc’ has no value, Org uses the generated file name for both the “link” and “description” parts of the link.By default, Org assumes that a table written to a file has TAB-delimited output. You can choose a different separator with the ‘sep’ header argument.</p>
</li>
</ul>
<h4 id="Format"><a href="#Format" class="headerlink" title="Format"></a>Format</h4><p>Format pertains to the type of the result returned by the code block. Choose one of the options; they are mutually exclusive. The default follows from the type specified above.</p>
<ul>
<li><p>‘code’</p>
<p>Result enclosed in a code block. Useful for parsing. Usage example: ‘:results value code’.</p>
</li>
<li><p>‘drawer’</p>
<p>Result wrapped in a ‘RESULTS’ drawer. Useful for containing ‘raw’ or ‘org’ results for later scripting and automated processing. Usage example: ‘:results value drawer’.</p>
</li>
<li><p>‘html’</p>
<p>Results enclosed in a ‘BEGIN_EXPORT html’ block. Usage example: ‘:results value html’.</p>
</li>
<li><p>‘latex’</p>
<p>Results enclosed in a ‘BEGIN_EXPORT latex’ block. Usage example: ‘:results value latex’.</p>
</li>
<li><p>‘link’</p>
</li>
<li><p>‘graphics’</p>
<p>Result is a link to the file specified in ‘:file’ header argument. However, unlike plain ‘:file’, nothing is written to the disk. The block is used for its side-effects only, as in the following example:<code>#+begin_src shell :results link :file &quot;download.tar.gz&quot; wget -c &quot;http://example.com/download.tar.gz&quot; #+end_src</code></p>
</li>
<li><p>‘org’</p>
<p>Results enclosed in a ‘BEGIN_SRC org’ block. For comma-escape, either TAB in the block, or export the file. Usage example: ‘:results value org’.</p>
</li>
<li><p>‘pp’</p>
<p>Result converted to pretty-print source code. Enclosed in a code block. Languages supported: Emacs Lisp, Python, and Ruby. Usage example: ‘:results value pp’.</p>
</li>
<li><p>‘raw’</p>
<p>Interpreted as raw Org mode. Inserted directly into the buffer. Aligned if it is a table. Usage example: ‘:results value raw’.</p>
</li>
</ul>
<p>The ‘wrap’ header argument unconditionnally marks the results block by appending strings to ‘#+BEGIN_’ and ‘#+END_’. If no string is specified, Org wraps the results in a ‘#+BEGIN_results’ … ‘#+END_results’ block. It takes precedent over the ‘results’ value listed above. E.g.,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#+BEGIN_SRC emacs-lisp :results html :wrap EXPORT markdown</span><br><span class="line">&quot;&lt;blink&gt;Welcome back to the 90&apos;s&lt;/blink&gt;&quot;</span><br><span class="line">#+END_SRC</span><br><span class="line"></span><br><span class="line">#+RESULTS:</span><br><span class="line">#+BEGIN_EXPORT markdown</span><br><span class="line">&lt;blink&gt;Welcome back to the 90&apos;s&lt;/blink&gt;</span><br><span class="line">#+END_EXPORT</span><br></pre></td></tr></table></figure>
<h4 id="Handling"><a href="#Handling" class="headerlink" title="Handling"></a>Handling</h4><p>Handling options after collecting the results.</p>
<ul>
<li><p>‘silent’</p>
<p>Do not insert results in the Org mode buffer, but echo them in the minibuffer. Usage example: ‘:results output silent’.</p>
</li>
<li><p>‘replace’</p>
<p>Default. Insert results in the Org buffer. Remove previous results. Usage example: ‘:results output replace’.</p>
</li>
<li><p>‘append’</p>
<p>Append results to the Org buffer. Latest results are at the bottom. Does not remove previous results. Usage example: ‘:results output append’.</p>
</li>
<li><p>‘prepend’</p>
<p>Prepend results to the Org buffer. Latest results are at the top. Does not remove previous results. Usage example: ‘:results output prepend’.</p>
</li>
</ul>
<h4 id="Post-processing"><a href="#Post-processing" class="headerlink" title="Post-processing"></a>Post-processing</h4><p>The ‘post’ header argument is for post-processing results from block evaluation. When ‘post’ has any value, Org binds the results to <code>*this*</code> variable for easy passing to ‘var’ header argument specifications (see <a href="https://orgmode.org/org.html#Environment-of-a-Code-Block" target="_blank" rel="noopener">Environment of a Code Block</a>). That makes results available to other code blocks, or even for direct Emacs Lisp code execution.</p>
<p>The following two examples illustrate ‘post’ header argument in action. The first one shows how to attach an ‘ATTR_LATEX’ keyword using ‘post’.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#+NAME: attr_wrap</span><br><span class="line">#+BEGIN_SRC sh :var data=&quot;&quot; :var width=&quot;\\textwidth&quot; :results output</span><br><span class="line">  echo &quot;#+ATTR_LATEX: :width $width&quot;</span><br><span class="line">  echo &quot;$data&quot;</span><br><span class="line">#+END_SRC</span><br><span class="line"></span><br><span class="line">#+HEADER: :file /tmp/it.png</span><br><span class="line">#+BEGIN_SRC dot :post attr_wrap(width=&quot;5cm&quot;, data=*this*) :results drawer</span><br><span class="line">  digraph&#123;</span><br><span class="line">          a -&gt; b;</span><br><span class="line">          b -&gt; c;</span><br><span class="line">          c -&gt; a;</span><br><span class="line">  &#125;</span><br><span class="line">#+end_src</span><br><span class="line"></span><br><span class="line">#+RESULTS:</span><br><span class="line">:RESULTS:</span><br><span class="line">#+ATTR_LATEX :width 5cm</span><br><span class="line">[[file:/tmp/it.png]]</span><br><span class="line">:END:</span><br></pre></td></tr></table></figure>
<p>The second example shows use of ‘colnames’ header argument in ‘post’ to pass data between code blocks.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#+NAME: round-tbl</span><br><span class="line">#+BEGIN_SRC emacs-lisp :var tbl=&quot;&quot; fmt=&quot;%.3f&quot;</span><br><span class="line">  (mapcar (lambda (row)</span><br><span class="line">            (mapcar (lambda (cell)</span><br><span class="line">                      (if (numberp cell)</span><br><span class="line">                          (format fmt cell)</span><br><span class="line">                        cell))</span><br><span class="line">                    row))</span><br><span class="line">          tbl)</span><br><span class="line">#+end_src</span><br><span class="line"></span><br><span class="line">#+BEGIN_SRC R :colnames yes :post round-tbl[:colnames yes](*this*)</span><br><span class="line">  set.seed(42)</span><br><span class="line">  data.frame(foo=rnorm(1))</span><br><span class="line">#+END_SRC</span><br><span class="line"></span><br><span class="line">#+RESULTS:</span><br><span class="line">|   foo |</span><br><span class="line">|-------|</span><br><span class="line">| 1.371 |</span><br></pre></td></tr></table></figure>
<hr>
<p>Next: <a href="https://orgmode.org/org.html#Extracting-Source-Code" target="_blank" rel="noopener">Extracting Source Code</a>, Previous: <a href="https://orgmode.org/org.html#Results-of-Evaluation" target="_blank" rel="noopener">Results of Evaluation</a>, Up: <a href="https://orgmode.org/org.html#Working-with-Source-Code" target="_blank" rel="noopener">Working with Source Code</a>   [<a href="https://orgmode.org/org.html#SEC_Contents" target="_blank" rel="noopener">Contents</a>][<a href="https://orgmode.org/org.html#Main-Index" target="_blank" rel="noopener">Index</a>]</p>
<h3 id="14-6-Exporting-Code-Blocks"><a href="#14-6-Exporting-Code-Blocks" class="headerlink" title="14.6 Exporting Code Blocks"></a>14.6 Exporting Code Blocks</h3><p>It is possible to export the <em>code</em> of code blocks, the <em>results</em> of code block evaluation, <em>both</em> the code and the results of code block evaluation, or <em>none</em>. Org defaults to exporting <em>code</em> for most languages. For some languages, such as ditaa, Org defaults to <em>results</em>. To export just the body of code blocks, see <a href="https://orgmode.org/org.html#Literal-Examples" target="_blank" rel="noopener">Literal Examples</a>. To selectively export sub-trees of an Org document, see <a href="https://orgmode.org/org.html#Exporting" target="_blank" rel="noopener">Exporting</a>.</p>
<p>The ‘exports’ header argument is to specify if that part of the Org file is exported to, say, HTML or LaTeX formats.</p>
<ul>
<li><p>‘code’</p>
<p>The default. The body of code is included into the exported file. Example: ‘:exports code’.</p>
</li>
<li><p>‘results’</p>
<p>The results of evaluation of the code is included in the exported file. Example: ‘:exports results’.</p>
</li>
<li><p>‘both’</p>
<p>Both the code and results of evaluation are included in the exported file. Example: ‘:exports both’.</p>
</li>
<li><p>‘none’</p>
<p>Neither the code nor the results of evaluation is included in the exported file. Whether the code is evaluated at all depends on other options. Example: ‘:exports none’.</p>
</li>
</ul>
<p>To stop Org from evaluating code blocks to speed exports, use the header argument ‘:eval never-export’ (see <a href="https://orgmode.org/org.html#Evaluating-Code-Blocks" target="_blank" rel="noopener">Evaluating Code Blocks</a>). To stop Org from evaluating code blocks for greater security, set the <code>org-export-use-babel</code> variable to <code>nil</code>, but understand that header arguments will have no effect.</p>
<p>Turning off evaluation comes in handy when batch processing. For example, markup languages for wikis, which have a high risk of untrusted code. Stopping code block evaluation also stops evaluation of all header arguments of the code block. This may not be desirable in some circumstances. So during export, to allow evaluation of just the header arguments but not any code evaluation in the source block, set ‘:eval never-export’ (see <a href="https://orgmode.org/org.html#Evaluating-Code-Blocks" target="_blank" rel="noopener">Evaluating Code Blocks</a>).</p>
<p>Org never evaluates code blocks in commented sub-trees when exporting (see <a href="https://orgmode.org/org.html#Comment-Lines" target="_blank" rel="noopener">Comment Lines</a>). On the other hand, Org does evaluate code blocks in sub-trees excluded from export (see <a href="https://orgmode.org/org.html#Export-Settings" target="_blank" rel="noopener">Export Settings</a>).</p>
<hr>
<p>Next: <a href="https://orgmode.org/org.html#Languages" target="_blank" rel="noopener">Languages</a>, Previous: <a href="https://orgmode.org/org.html#Exporting-Code-Blocks" target="_blank" rel="noopener">Exporting Code Blocks</a>, Up: <a href="https://orgmode.org/org.html#Working-with-Source-Code" target="_blank" rel="noopener">Working with Source Code</a>   [<a href="https://orgmode.org/org.html#SEC_Contents" target="_blank" rel="noopener">Contents</a>][<a href="https://orgmode.org/org.html#Main-Index" target="_blank" rel="noopener">Index</a>]</p>
<h3 id="14-7-Extracting-Source-Code"><a href="#14-7-Extracting-Source-Code" class="headerlink" title="14.7 Extracting Source Code"></a>14.7 Extracting Source Code</h3><p>Extracting source code from code blocks is a basic task in literate programming. Org has features to make this easy. In literate programming parlance, documents on creation are <em>woven</em> with code and documentation, and on export, the code is tangled for execution by a computer. Org facilitates weaving and tangling for producing, maintaining, sharing, and exporting literate programming documents. Org provides extensive customization options for extracting source code.</p>
<p>When Org tangles code blocks, it expands, merges, and transforms them. Then Org recomposes them into one or more separate files, as configured through the options. During this tangling process, Org expands variables in the source code, and resolves any Noweb style references (see <a href="https://orgmode.org/org.html#Noweb-Reference-Syntax" target="_blank" rel="noopener">Noweb Reference Syntax</a>).</p>
<h4 id="Header-arguments"><a href="#Header-arguments" class="headerlink" title="Header arguments"></a>Header arguments</h4><p>The ‘tangle’ header argument specifies if the code block is exported to source file(s).</p>
<ul>
<li><p>‘yes’</p>
<p>Export the code block to source file. The file name for the source file is derived from the name of the Org file, and the file extension is derived from the source code language identifier. Example: ‘:tangle yes’.</p>
</li>
<li><p>‘no’</p>
<p>The default. Do not extract the code in a source code file. Example: ‘:tangle no’.</p>
</li>
<li><p>FILENAME</p>
<p>Export the code block to source file whose file name is derived from any string passed to the ‘tangle’ header argument. Org derives the file name as being relative to the directory of the Org file’s location. Example: ‘:tangle FILENAME’.</p>
</li>
</ul>
<p>The ‘mkdirp’ header argument creates parent directories for tangled files if the directory does not exist. ‘yes’ enables directory creation and ‘no’ inhibits directory creation.</p>
<p>The ‘comments’ header argument controls inserting comments into tangled files. These are above and beyond whatever comments may already exist in the code block.</p>
<ul>
<li><p>‘no’</p>
<p>The default. Do not insert any extra comments during tangling.</p>
</li>
<li><p>‘link’</p>
<p>Wrap the code block in comments. Include links pointing back to the place in the Org file from where the code was tangled.</p>
</li>
<li><p>‘yes’</p>
<p>Kept for backward compatibility; same as ‘link’.</p>
</li>
<li><p>‘org’</p>
<p>Nearest headline text from Org file is inserted as comment. The exact text that is inserted is picked from the leading context of the source block.</p>
</li>
<li><p>‘both’</p>
<p>Includes both ‘link’ and ‘org’ options.</p>
</li>
<li><p>‘noweb’</p>
<p>Includes ‘link’ option, expands Noweb references (see <a href="https://orgmode.org/org.html#Noweb-Reference-Syntax" target="_blank" rel="noopener">Noweb Reference Syntax</a>), and wraps them in link comments inside the body of the code block.</p>
</li>
</ul>
<p>The ‘padline’ header argument controls insertion of newlines to pad source code in the tangled file.</p>
<ul>
<li><p>‘yes’</p>
<p>Default. Insert a newline before and after each code block in the tangled file.</p>
</li>
<li><p>‘no’</p>
<p>Do not insert newlines to pad the tangled code blocks.</p>
</li>
</ul>
<p>The ‘shebang’ header argument can turn results into executable script files. By setting it to a string value—for example, ‘:shebang “#!/bin/bash”’—Org inserts that string as the first line of the tangled file that the code block is extracted to. Org then turns on the tangled file’s executable permission.</p>
<p>The ‘tangle-mode’ header argument specifies what permissions to set for tangled files by <code>set-file-modes</code>. For example, to make a read-only tangled file, use ‘:tangle-mode (identity #o444)’. To make it executable, use ‘:tangle-mode (identity #o755)’. It also overrides executable permission granted by ‘shebang’. When multiple source code blocks tangle to a single file with different and conflicting ‘tangle-mode’ header arguments, Org’s behavior is undefined.</p>
<p>By default Org expands code blocks during tangling. The ‘no-expand’ header argument turns off such expansions. Note that one side-effect of expansion by <code>org-babel-expand-src-block</code> also assigns values (see <a href="https://orgmode.org/org.html#Environment-of-a-Code-Block" target="_blank" rel="noopener">Environment of a Code Block</a>) to variables. Expansions also replace Noweb references with their targets (see <a href="https://orgmode.org/org.html#Noweb-Reference-Syntax" target="_blank" rel="noopener">Noweb Reference Syntax</a>). Some of these expansions may cause premature assignment, hence this option. This option makes a difference only for tangling. It has no effect when exporting since code blocks for execution have to be expanded anyway.</p>
<h4 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h4><ul>
<li><p><code>org-babel-tangle</code></p>
<p>Tangle the current file. Bound to C-c C-v t.With prefix argument only tangle the current code block.</p>
</li>
<li><p><code>org-babel-tangle-file</code></p>
<p>Choose a file to tangle. Bound to C-c C-v f.</p>
</li>
</ul>
<h4 id="Hooks"><a href="#Hooks" class="headerlink" title="Hooks"></a>Hooks</h4><ul>
<li><p><code>org-babel-post-tangle-hook</code></p>
<p>This hook is run from within code files tangled by <code>org-babel-tangle</code>, making it suitable for post-processing, compilation, and evaluation of code in the tangled files.</p>
</li>
</ul>
<h4 id="Jumping-between-code-and-Org"><a href="#Jumping-between-code-and-Org" class="headerlink" title="Jumping between code and Org"></a>Jumping between code and Org</h4><p>Debuggers normally link errors and messages back to the source code. But for tangled files, we want to link back to the Org file, not to the tangled source file. To make this extra jump, Org uses <code>org-babel-tangle-jump-to-org</code> function with two additional source code block header arguments:</p>
<ol>
<li>Set ‘padline’ to true—this is the default setting.</li>
<li>Set ‘comments’ to ‘link’, which makes Org insert links to the Org file.</li>
</ol>
<hr>
<p>Next: <a href="https://orgmode.org/org.html#Editing-Source-Code" target="_blank" rel="noopener">Editing Source Code</a>, Previous: <a href="https://orgmode.org/org.html#Extracting-Source-Code" target="_blank" rel="noopener">Extracting Source Code</a>, Up: <a href="https://orgmode.org/org.html#Working-with-Source-Code" target="_blank" rel="noopener">Working with Source Code</a>   [<a href="https://orgmode.org/org.html#SEC_Contents" target="_blank" rel="noopener">Contents</a>][<a href="https://orgmode.org/org.html#Main-Index" target="_blank" rel="noopener">Index</a>]</p>
<h3 id="14-8-Languages"><a href="#14-8-Languages" class="headerlink" title="14.8 Languages"></a>14.8 Languages</h3><p>Code blocks in the following languages are supported.</p>
<table>
<thead>
<tr>
<th>Language</th>
<th>Identifier</th>
<th>Language</th>
<th>Identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>Asymptote</td>
<td>‘asymptote’</td>
<td>Lua</td>
<td>‘lua’</td>
</tr>
<tr>
<td>Awk</td>
<td>‘awk’</td>
<td>MATLAB</td>
<td>‘matlab’</td>
</tr>
<tr>
<td>C</td>
<td>‘C’</td>
<td>Mscgen</td>
<td>‘mscgen’</td>
</tr>
<tr>
<td>C++</td>
<td>‘C++’<a href="https://orgmode.org/org.html#FOOT144" target="_blank" rel="noopener">144</a></td>
<td>OCaml</td>
<td>‘ocaml’</td>
</tr>
<tr>
<td>Clojure</td>
<td>‘clojure’</td>
<td>Octave</td>
<td>‘octave’</td>
</tr>
<tr>
<td>CSS</td>
<td>‘css’</td>
<td>Org mode</td>
<td>‘org’</td>
</tr>
<tr>
<td>D</td>
<td>‘D’<a href="https://orgmode.org/org.html#FOOT145" target="_blank" rel="noopener">145</a></td>
<td>Oz</td>
<td>‘oz’</td>
</tr>
<tr>
<td>ditaa</td>
<td>‘ditaa’</td>
<td>Perl</td>
<td>‘perl’</td>
</tr>
<tr>
<td>Emacs Calc</td>
<td>‘calc’</td>
<td>Plantuml</td>
<td>‘plantuml’</td>
</tr>
<tr>
<td>Emacs Lisp</td>
<td>‘emacs-lisp’</td>
<td>Processing.js</td>
<td>‘processing’</td>
</tr>
<tr>
<td>Fortran</td>
<td>‘fortran’</td>
<td>Python</td>
<td>‘python’</td>
</tr>
<tr>
<td>Gnuplot</td>
<td>‘gnuplot’</td>
<td>R</td>
<td>‘R’</td>
</tr>
<tr>
<td>GNU Screen</td>
<td>‘screen’</td>
<td>Ruby</td>
<td>‘ruby’</td>
</tr>
<tr>
<td>Graphviz</td>
<td>‘dot’</td>
<td>Sass</td>
<td>‘sass’</td>
</tr>
<tr>
<td>Haskell</td>
<td>‘haskell’</td>
<td>Scheme</td>
<td>‘scheme’</td>
</tr>
<tr>
<td>Java</td>
<td>‘java’</td>
<td>Sed</td>
<td>‘sed’</td>
</tr>
<tr>
<td>Javascript</td>
<td>‘js’</td>
<td>shell</td>
<td>‘sh’</td>
</tr>
<tr>
<td>LaTeX</td>
<td>‘latex’</td>
<td>SQL</td>
<td>‘sql’</td>
</tr>
<tr>
<td>Ledger</td>
<td>‘ledger’</td>
<td>SQLite</td>
<td>‘sqlite’</td>
</tr>
<tr>
<td>Lilypond</td>
<td>‘lilypond’</td>
<td>Vala</td>
<td>‘vala’</td>
</tr>
<tr>
<td>Lisp</td>
<td>‘lisp’</td>
<td></td>
</tr>
</tbody>
</table>
<p>Additional documentation for some languages is at <a href="https://orgmode.org/worg/org-contrib/babel/languages.html" target="_blank" rel="noopener">https://orgmode.org/worg/org-contrib/babel/languages.html</a>.</p>
<p>By default, only Emacs Lisp is enabled for evaluation. To enable or disable other languages, customize the <code>org-babel-load-languages</code> variable either through the Emacs customization interface, or by adding code to the init file as shown next.</p>
<p>In this example, evaluation is disabled for Emacs Lisp, and enabled for R.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(org-babel-do-load-languages</span><br><span class="line"> &apos;org-babel-load-languages</span><br><span class="line"> &apos;((emacs-lisp . nil)</span><br><span class="line">   (R . t)))</span><br></pre></td></tr></table></figure>
<p>Note that this is not the only way to enable a language. Org also enables languages when loaded with <code>require</code> statement. For example, the following enables execution of Clojure code blocks:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(require &apos;ob-clojure)</span><br></pre></td></tr></table></figure>
<hr>
<p>Next: <a href="https://orgmode.org/org.html#Noweb-Reference-Syntax" target="_blank" rel="noopener">Noweb Reference Syntax</a>, Previous: <a href="https://orgmode.org/org.html#Languages" target="_blank" rel="noopener">Languages</a>, Up: <a href="https://orgmode.org/org.html#Working-with-Source-Code" target="_blank" rel="noopener">Working with Source Code</a>   [<a href="https://orgmode.org/org.html#SEC_Contents" target="_blank" rel="noopener">Contents</a>][<a href="https://orgmode.org/org.html#Main-Index" target="_blank" rel="noopener">Index</a>]</p>
<h3 id="14-9-Editing-Source-Code"><a href="#14-9-Editing-Source-Code" class="headerlink" title="14.9 Editing Source Code"></a>14.9 Editing Source Code</h3><p>Use C-c ‘ to edit the current code block. It opens a new major-mode edit buffer containing the body of the source code block, ready for any edits. Use C-c ‘ again to close the buffer and return to the Org buffer.</p>
<p>C-x C-s saves the buffer and updates the contents of the Org buffer. Set <code>org-edit-src-auto-save-idle-delay</code> to save the base buffer after a certain idle delay time. Set <code>org-edit-src-turn-on-auto-save</code> to auto-save this buffer into a separate file using Auto-save mode.</p>
<p>While editing the source code in the major mode, the Org Src minor mode remains active. It provides these customization variables as described below. For even more variables, look in the customization group <code>org-edit-structure</code>.</p>
<ul>
<li><p><code>org-src-lang-modes</code></p>
<p>If an Emacs major-mode named <code>&lt;LANG&gt;-mode</code> exists, where <lang> is the language identifier from code block’s header line, then the edit buffer uses that major mode. Use this variable to arbitrarily map language identifiers to major modes.</lang></p>
</li>
<li><p><code>org-src-window-setup</code></p>
<p>For specifying Emacs window arrangement when the new edit buffer is created.</p>
</li>
<li><p><code>org-src-preserve-indentation</code></p>
<p>Default is <code>nil</code>. Source code is indented. This indentation applies during export or tangling, and depending on the context, may alter leading spaces and tabs. When non-<code>nil</code>, source code is aligned with the leftmost column. No lines are modified during export or tangling, which is very useful for white-space sensitive languages, such as Python.</p>
</li>
<li><p><code>org-src-ask-before-returning-to-edit-buffer</code></p>
<p>When <code>nil</code>, Org returns to the edit buffer without further prompts. The default prompts for a confirmation.</p>
</li>
</ul>
<p>Set <code>org-src-fontify-natively</code> to non-<code>nil</code> to turn on native code fontification in the <em>Org</em> buffer. Fontification of code blocks can give visual separation of text and code on the display page. To further customize the appearance of <code>org-block</code> for specific languages, customize <code>org-src-block-faces</code>. The following example shades the background of regular blocks, and colors source blocks only for Python and Emacs Lisp languages.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(require &apos;color)</span><br><span class="line">(set-face-attribute &apos;org-block nil :background</span><br><span class="line">                    (color-darken-name</span><br><span class="line">                     (face-attribute &apos;default :background) 3))</span><br><span class="line"></span><br><span class="line">(setq org-src-block-faces &apos;((&quot;emacs-lisp&quot; (:background &quot;#EEE2FF&quot;))</span><br><span class="line">                            (&quot;python&quot; (:background &quot;#E5FFB8&quot;))))</span><br></pre></td></tr></table></figure>
<hr>
<p>Next: <a href="https://orgmode.org/org.html#Library-of-Babel" target="_blank" rel="noopener">Library of Babel</a>, Previous: <a href="https://orgmode.org/org.html#Editing-Source-Code" target="_blank" rel="noopener">Editing Source Code</a>, Up: <a href="https://orgmode.org/org.html#Working-with-Source-Code" target="_blank" rel="noopener">Working with Source Code</a>   [<a href="https://orgmode.org/org.html#SEC_Contents" target="_blank" rel="noopener">Contents</a>][<a href="https://orgmode.org/org.html#Main-Index" target="_blank" rel="noopener">Index</a>]</p>
<h3 id="14-10-Noweb-Reference-Syntax"><a href="#14-10-Noweb-Reference-Syntax" class="headerlink" title="14.10 Noweb Reference Syntax"></a>14.10 Noweb Reference Syntax</h3><p>Org supports named blocks in Noweb<a href="https://orgmode.org/org.html#FOOT146" target="_blank" rel="noopener">146</a> style syntax:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;CODE-BLOCK-ID&gt;&gt;</span><br></pre></td></tr></table></figure>
<p>Org can replace the construct with the source code, or the results of evaluation, of the code block identified as CODE-BLOCK-ID.</p>
<p>The ‘noweb’ header argument controls expansion of Noweb syntax references. Expansions occur when source code blocks are evaluated, tangled, or exported.</p>
<ul>
<li><p>‘no’</p>
<p>Default. No expansion of Noweb syntax references in the body of the code when evaluating, tangling, or exporting.</p>
</li>
<li><p>‘yes’</p>
<p>Expansion of Noweb syntax references in the body of the code block when evaluating, tangling, or exporting.</p>
</li>
<li><p>‘tangle’</p>
<p>Expansion of Noweb syntax references in the body of the code block when tangling. No expansion when evaluating or exporting.</p>
</li>
<li><p>‘no-export’</p>
<p>Expansion of Noweb syntax references in the body of the code block when evaluating or tangling. No expansion when exporting.</p>
</li>
<li><p>‘strip-export’</p>
<p>Expansion of Noweb syntax references in the body of the code block when expanding prior to evaluating or tangling. Removes Noweb syntax references when exporting.</p>
</li>
<li><p>‘eval’</p>
<p>Expansion of Noweb syntax references in the body of the code block only before evaluating.</p>
</li>
</ul>
<p>In the following example,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#+NAME: initialization</span><br><span class="line">#+BEGIN_SRC emacs-lisp</span><br><span class="line">  (setq sentence &quot;Never a foot too far, even.&quot;)</span><br><span class="line">#+END_SRC</span><br><span class="line"></span><br><span class="line">#+BEGIN_SRC emacs-lisp :noweb yes</span><br><span class="line">  &lt;&lt;initialization&gt;&gt;</span><br><span class="line">  (reverse sentence)</span><br><span class="line">#+END_SRC</span><br></pre></td></tr></table></figure>
<p>the second code block is expanded as</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#+BEGIN_SRC emacs-lisp :noweb yes</span><br><span class="line">  (setq sentence &quot;Never a foot too far, even.&quot;)</span><br><span class="line">  (reverse sentence)</span><br><span class="line">#+END_SRC</span><br></pre></td></tr></table></figure>
<p>Noweb insertions honor prefix characters that appear before the Noweb syntax reference. This behavior is illustrated in the following example. Because the ‘&lt;<example>&gt;’ Noweb reference appears behind the SQL comment syntax, each line of the expanded Noweb reference is commented. With:</example></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#+NAME: example</span><br><span class="line">#+BEGIN_SRC text</span><br><span class="line">  this is the</span><br><span class="line">  multi-line body of example</span><br><span class="line">#+END_SRC</span><br></pre></td></tr></table></figure>
<p>this code block:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#+BEGIN_SRC sql :noweb yes</span><br><span class="line"> ---&lt;&lt;example&gt;&gt;</span><br><span class="line">#+END_SRC</span><br></pre></td></tr></table></figure>
<p>expands to:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#+BEGIN_SRC sql :noweb yes</span><br><span class="line"> ---this is the</span><br><span class="line"> ---multi-line body of example</span><br><span class="line">#+END_SRC</span><br></pre></td></tr></table></figure>
<p>Since this change does not affect Noweb replacement text without newlines in them, inline Noweb references are acceptable.</p>
<p>This feature can also be used for management of indentation in exported code snippets. With:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#+NAME: if-true</span><br><span class="line">#+BEGIN_SRC python :exports none</span><br><span class="line">  print(&apos;do things when true&apos;)</span><br><span class="line">#+end_src</span><br><span class="line"></span><br><span class="line">#+name: if-false</span><br><span class="line">#+begin_src python :exports none</span><br><span class="line">  print(&apos;do things when false&apos;)</span><br><span class="line">#+end_src</span><br></pre></td></tr></table></figure>
<p>this code block:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#+begin_src python :noweb yes :results output</span><br><span class="line">  if true:</span><br><span class="line">      &lt;&lt;if-true&gt;&gt;</span><br><span class="line">  else:</span><br><span class="line">      &lt;&lt;if-false&gt;&gt;</span><br><span class="line">#+end_src</span><br></pre></td></tr></table></figure>
<p>expands to:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if true:</span><br><span class="line">    print(&apos;do things when true&apos;)</span><br><span class="line">else:</span><br><span class="line">    print(&apos;do things when false&apos;)</span><br></pre></td></tr></table></figure>
<p>When expanding Noweb style references, Org concatenates code blocks by matching the reference name to either the code block name or, if none is found, to the ‘noweb-ref’ header argument.</p>
<p>For simple concatenation, set this ‘noweb-ref’ header argument at the sub-tree or file level. In the example Org file shown next, the body of the source code in each block is extracted for concatenation to a pure code file when tangled.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#+BEGIN_SRC sh :tangle yes :noweb yes :shebang #!/bin/sh</span><br><span class="line">  &lt;&lt;fullest-disk&gt;&gt;</span><br><span class="line">#+END_SRC</span><br><span class="line">* the mount point of the fullest disk</span><br><span class="line">  :PROPERTIES:</span><br><span class="line">  :header-args: :noweb-ref fullest-disk</span><br><span class="line">  :END:</span><br><span class="line"></span><br><span class="line">** query all mounted disks</span><br><span class="line">#+BEGIN_SRC sh</span><br><span class="line">  df \</span><br><span class="line">#+END_SRC</span><br><span class="line"></span><br><span class="line">** strip the header row</span><br><span class="line">#+BEGIN_SRC sh</span><br><span class="line">  |sed &apos;1d&apos; \</span><br><span class="line">#+END_SRC</span><br><span class="line"></span><br><span class="line">** output mount point of fullest disk</span><br><span class="line">#+BEGIN_SRC sh</span><br><span class="line">  |awk &apos;&#123;if (u &lt; +$5) &#123;u = +$5; m = $6&#125;&#125; END &#123;print m&#125;&apos;</span><br><span class="line">#+END_SRC</span><br></pre></td></tr></table></figure>
<p>By default a newline separates each noweb reference concatenation. To change this newline separator, edit the ‘noweb-sep’ header argument.</p>
<p>Eventually, Org can include the results of a code block rather than its body. To that effect, append parentheses, possibly including arguments, to the code block name, as shown below.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;code-block-name(optional arguments)&gt;&gt;</span><br></pre></td></tr></table></figure>
<p>Note that when using the above approach to a code block’s results, the code block name set by ‘NAME’ keyword is required; the reference set by ‘noweb-ref’ does not work in that case.</p>
<p>Here is an example that demonstrates how the exported content changes when Noweb style references are used with parentheses versus without. With:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#+NAME: some-code</span><br><span class="line">#+BEGIN_SRC python :var num=0 :results output :exports none</span><br><span class="line">  print(num*10)</span><br><span class="line">#+END_SRC</span><br></pre></td></tr></table></figure>
<p>this code block:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#+BEGIN_SRC text :noweb yes</span><br><span class="line">  &lt;&lt;some-code&gt;&gt;</span><br><span class="line">#+END_SRC</span><br></pre></td></tr></table></figure>
<p>expands to:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(num*10)</span><br></pre></td></tr></table></figure>
<p>Below, a similar Noweb style reference is used, but with parentheses, while setting a variable ‘num’ to 10:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#+BEGIN_SRC text :noweb yes</span><br><span class="line">  &lt;&lt;some-code(num=10)&gt;&gt;</span><br><span class="line">#+END_SRC</span><br></pre></td></tr></table></figure>
<p>Note that now the expansion contains the results of the code block ‘some-code’, not the code block itself:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">100</span><br></pre></td></tr></table></figure>
<hr>
<p>Next: <a href="https://orgmode.org/org.html#Key-bindings-and-Useful-Functions" target="_blank" rel="noopener">Key bindings and Useful Functions</a>, Previous: <a href="https://orgmode.org/org.html#Noweb-Reference-Syntax" target="_blank" rel="noopener">Noweb Reference Syntax</a>, Up: <a href="https://orgmode.org/org.html#Working-with-Source-Code" target="_blank" rel="noopener">Working with Source Code</a>   [<a href="https://orgmode.org/org.html#SEC_Contents" target="_blank" rel="noopener">Contents</a>][<a href="https://orgmode.org/org.html#Main-Index" target="_blank" rel="noopener">Index</a>]</p>
<h3 id="14-11-Library-of-Babel"><a href="#14-11-Library-of-Babel" class="headerlink" title="14.11 Library of Babel"></a>14.11 Library of Babel</h3><p>The “Library of Babel” is a collection of code blocks. Like a function library, these code blocks can be called from other Org files. A collection of useful code blocks is available on <a href="https://orgmode.org/worg/library-of-babel.html" target="_blank" rel="noopener">Worg</a>. For remote code block evaluation syntax, see <a href="https://orgmode.org/org.html#Evaluating-Code-Blocks" target="_blank" rel="noopener">Evaluating Code Blocks</a>.</p>
<p>For any user to add code to the library, first save the code in regular code blocks of an Org file, and then load the Org file with <code>org-babel-lob-ingest</code>, which is bound to C-c C-v i.</p>
<hr>
<p>Next: <a href="https://orgmode.org/org.html#Batch-Execution" target="_blank" rel="noopener">Batch Execution</a>, Previous: <a href="https://orgmode.org/org.html#Library-of-Babel" target="_blank" rel="noopener">Library of Babel</a>, Up: <a href="https://orgmode.org/org.html#Working-with-Source-Code" target="_blank" rel="noopener">Working with Source Code</a>   [<a href="https://orgmode.org/org.html#SEC_Contents" target="_blank" rel="noopener">Contents</a>][<a href="https://orgmode.org/org.html#Main-Index" target="_blank" rel="noopener">Index</a>]</p>
<h3 id="14-12-Key-bindings-and-Useful-Functions"><a href="#14-12-Key-bindings-and-Useful-Functions" class="headerlink" title="14.12 Key bindings and Useful Functions"></a>14.12 Key bindings and Useful Functions</h3><p>Many common Org mode key sequences are re-bound depending on the context.</p>
<p>Active key bindings in code blocks:</p>
<table>
<thead>
<tr>
<th>Key binding</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td>C-c C-c</td>
<td><code>org-babel-execute-src-block</code></td>
</tr>
<tr>
<td>C-c C-o</td>
<td><code>org-babel-open-src-block-result</code></td>
</tr>
<tr>
<td>M-UP</td>
<td><code>org-babel-load-in-session</code></td>
</tr>
<tr>
<td>M-DOWN</td>
<td><code>org-babel-pop-to-session</code></td>
</tr>
</tbody>
</table>
<p>Active key bindings in Org mode buffer:</p>
<table>
<thead>
<tr>
<th>Key binding</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td>C-c C-v p or C-c C-v C-p</td>
<td><code>org-babel-previous-src-block</code></td>
</tr>
<tr>
<td>C-c C-v n or C-c C-v C-n</td>
<td><code>org-babel-next-src-block</code></td>
</tr>
<tr>
<td>C-c C-v e or C-c C-v C-e</td>
<td><code>org-babel-execute-maybe</code></td>
</tr>
<tr>
<td>C-c C-v o or C-c C-v C-o</td>
<td><code>org-babel-open-src-block-result</code></td>
</tr>
<tr>
<td>C-c C-v v or C-c C-v C-v</td>
<td><code>org-babel-expand-src-block</code></td>
</tr>
<tr>
<td>C-c C-v u or C-c C-v C-u</td>
<td><code>org-babel-goto-src-block-head</code></td>
</tr>
<tr>
<td>C-c C-v g or C-c C-v C-g</td>
<td><code>org-babel-goto-named-src-block</code></td>
</tr>
<tr>
<td>C-c C-v r or C-c C-v C-r</td>
<td><code>org-babel-goto-named-result</code></td>
</tr>
<tr>
<td>C-c C-v b or C-c C-v C-b</td>
<td><code>org-babel-execute-buffer</code></td>
</tr>
<tr>
<td>C-c C-v s or C-c C-v C-s</td>
<td><code>org-babel-execute-subtree</code></td>
</tr>
<tr>
<td>C-c C-v d or C-c C-v C-d</td>
<td><code>org-babel-demarcate-block</code></td>
</tr>
<tr>
<td>C-c C-v t or C-c C-v C-t</td>
<td><code>org-babel-tangle</code></td>
</tr>
<tr>
<td>C-c C-v f or C-c C-v C-f</td>
<td><code>org-babel-tangle-file</code></td>
</tr>
<tr>
<td>C-c C-v c or C-c C-v C-c</td>
<td><code>org-babel-check-src-block</code></td>
</tr>
<tr>
<td>C-c C-v j or C-c C-v C-j</td>
<td><code>org-babel-insert-header-arg</code></td>
</tr>
<tr>
<td>C-c C-v l or C-c C-v C-l</td>
<td><code>org-babel-load-in-session</code></td>
</tr>
<tr>
<td>C-c C-v i or C-c C-v C-i</td>
<td><code>org-babel-lob-ingest</code></td>
</tr>
<tr>
<td>C-c C-v I or C-c C-v C-I</td>
<td><code>org-babel-view-src-block-info</code></td>
</tr>
<tr>
<td>C-c C-v z or C-c C-v C-z</td>
<td><code>org-babel-switch-to-session-with-code</code></td>
</tr>
<tr>
<td>C-c C-v a or C-c C-v C-a</td>
<td><code>org-babel-sha1-hash</code></td>
</tr>
<tr>
<td>C-c C-v h or C-c C-v C-h</td>
<td><code>org-babel-describe-bindings</code></td>
</tr>
<tr>
<td>C-c C-v x or C-c C-v C-x</td>
<td><code>org-babel-do-key-sequence-in-edit-buffer</code></td>
</tr>
</tbody>
</table>
<hr>
<p>Previous: <a href="https://orgmode.org/org.html#Key-bindings-and-Useful-Functions" target="_blank" rel="noopener">Key bindings and Useful Functions</a>, Up: <a href="https://orgmode.org/org.html#Working-with-Source-Code" target="_blank" rel="noopener">Working with Source Code</a>   [<a href="https://orgmode.org/org.html#SEC_Contents" target="_blank" rel="noopener">Contents</a>][<a href="https://orgmode.org/org.html#Main-Index" target="_blank" rel="noopener">Index</a>]</p>
<h3 id="14-13-Batch-Execution"><a href="#14-13-Batch-Execution" class="headerlink" title="14.13 Batch Execution"></a>14.13 Batch Execution</h3><p>Org mode features, including working with source code facilities can be invoked from the command line. This enables building shell scripts for batch processing, running automated system tasks, and expanding Org mode’s usefulness.</p>
<p>The sample script shows batch processing of multiple files using <code>org-babel-tangle</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line"># Tangle files with Org mode</span><br><span class="line">#</span><br><span class="line">emacs -Q --batch --eval &quot;</span><br><span class="line">    (progn</span><br><span class="line">      (require &apos;ob-tangle)</span><br><span class="line">      (dolist (file command-line-args-left)</span><br><span class="line">        (with-current-buffer (find-file-noselect file)</span><br><span class="line">          (org-babel-tangle))))</span><br><span class="line">  &quot; &quot;$@&quot;</span><br></pre></td></tr></table></figure>
<hr>
<p>Next: <a href="https://orgmode.org/org.html#Hacking" target="_blank" rel="noopener">Hacking</a>, Previous: <a href="https://orgmode.org/org.html#Working-with-Source-Code" target="_blank" rel="noopener">Working with Source Code</a>, Up: <a href="https://orgmode.org/org.html#Top" target="_blank" rel="noopener">Top</a>   [<a href="https://orgmode.org/org.html#SEC_Contents" target="_blank" rel="noopener">Contents</a>][<a href="https://orgmode.org/org.html#Main-Index" target="_blank" rel="noopener">Index</a>]</p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/org-mode/" rel="tag"># org-mode</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/06/13/emacs-ipython-notebook/" rel="next" title="Emacs Ipython Notebook">
                <i class="fa fa-chevron-left"></i> Emacs Ipython Notebook
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Gabriel</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">30</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">16</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">29</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/AlphaAlgorithms" title="GitHub &rarr; https://github.com/AlphaAlgorithms" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#14-Working-with-Source-Code"><span class="nav-text">14 Working with Source Code</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#14-1-Structure-of-Code-Blocks"><span class="nav-text">14.1 Structure of Code Blocks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-2-Using-Header-Arguments"><span class="nav-text">14.2 Using Header Arguments</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#System-wide-header-arguments"><span class="nav-text">System-wide header arguments</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Header-arguments-in-Org-mode-properties"><span class="nav-text">Header arguments in Org mode properties</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Code-block-specific-header-arguments"><span class="nav-text">Code block specific header arguments</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Header-arguments-in-function-calls"><span class="nav-text">Header arguments in function calls</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-3-Environment-of-a-Code-Block"><span class="nav-text">14.3 Environment of a Code Block</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Passing-arguments"><span class="nav-text">Passing arguments</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Using-sessions"><span class="nav-text">Using sessions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Choosing-a-working-directory"><span class="nav-text">Choosing a working directory</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Inserting-headers-and-footers"><span class="nav-text">Inserting headers and footers</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-4-Evaluating-Code-Blocks"><span class="nav-text">14.4 Evaluating Code Blocks</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#How-to-evaluate-source-code"><span class="nav-text">How to evaluate source code</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Limit-code-block-evaluation"><span class="nav-text">Limit code block evaluation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Cache-results-of-evaluation"><span class="nav-text">Cache results of evaluation</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-5-Results-of-Evaluation"><span class="nav-text">14.5 Results of Evaluation</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Collection"><span class="nav-text">Collection</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Type"><span class="nav-text">Type</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Format"><span class="nav-text">Format</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Handling"><span class="nav-text">Handling</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Post-processing"><span class="nav-text">Post-processing</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-6-Exporting-Code-Blocks"><span class="nav-text">14.6 Exporting Code Blocks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-7-Extracting-Source-Code"><span class="nav-text">14.7 Extracting Source Code</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Header-arguments"><span class="nav-text">Header arguments</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Functions"><span class="nav-text">Functions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Hooks"><span class="nav-text">Hooks</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Jumping-between-code-and-Org"><span class="nav-text">Jumping between code and Org</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-8-Languages"><span class="nav-text">14.8 Languages</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-9-Editing-Source-Code"><span class="nav-text">14.9 Editing Source Code</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-10-Noweb-Reference-Syntax"><span class="nav-text">14.10 Noweb Reference Syntax</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-11-Library-of-Babel"><span class="nav-text">14.11 Library of Babel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-12-Key-bindings-and-Useful-Functions"><span class="nav-text">14.12 Key bindings and Useful Functions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-13-Batch-Execution"><span class="nav-text">14.13 Batch Execution</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Gabriel</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.1.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.1"></script>

  <script src="/js/motion.js?v=7.1.1"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.1.1"></script>




  
  <script src="/js/scrollspy.js?v=7.1.1"></script>
<script src="/js/post-details.js?v=7.1.1"></script>



  


  <script src="/js/next-boot.js?v=7.1.1"></script>


  

  

  

  
  
  <script id="dsq-count-scr" src="https://alphaalgorithms.disqus.com/count.js" async></script>


<script>
  var disqus_config = function() {
    this.page.url = "https://alphaalgorithms.github.io/2019/06/13/work-with-source-code/";
    this.page.identifier = "2019/06/13/work-with-source-code/";
    this.page.title = 'work with source code';
    };
  function loadComments() {
    var d = document, s = d.createElement('script');
    s.src = 'https://alphaalgorithms.disqus.com/embed.js';
    s.setAttribute('data-timestamp', '' + +new Date());
    (d.head || d.body).appendChild(s);
  }
  
    loadComments();
  
</script>





  


  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
